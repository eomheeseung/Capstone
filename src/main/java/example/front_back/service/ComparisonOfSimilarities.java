package example.front_back.service;

import org.springframework.stereotype.Service;

import java.util.stream.IntStream;

@Service
public class ComparisonOfSimilarities {
    public Double[] labeledDescriptor = getDoubleDescriptor();

    private static Double[] getDoubleDescriptor() {
        String str = getOriginalDescriptor();
        return getDoubleToken(str);
    }

    public double compareSimilarity(Double[] originToken, Double[] newToken) {
        double diff = Math.sqrt(
                IntStream.range(0, originToken.length)
                        .mapToDouble(i -> Math.pow(originToken[i] - newToken[i], 2))
                        .sum()
        );
        return diff;
    }
    private static Double[] getDoubleToken(String descriptor) {
        String[] lines = descriptor.split("\n");  // 문자열을 줄 단위로 분리하여 배열에 저장
        Double[] result = new Double[lines.length/3];
        int idx=0;
        for (int i = 2; i < lines.length; i += 3) {  // 인덱스 2부터 3씩 증가하며 3번째 줄씩 가져옴
            result[idx++] = Double.parseDouble(lines[i]);  // StringBuilder 객체에 줄 단위로 추가
        }
        return result;
    }
    private static String getOriginalDescriptor() {
        return "0\n" +
                ": \n" +
                "-0.05444609001278877\n" +
                "1\n" +
                ": \n" +
                "0.07898823171854019\n" +
                "2\n" +
                ": \n" +
                "0.06248875707387924\n" +
                "3\n" +
                ": \n" +
                "-0.07927580922842026\n" +
                "4\n" +
                ": \n" +
                "-0.1127907931804657\n" +
                "5\n" +
                ": \n" +
                "-0.025714099407196045\n" +
                "6\n" +
                ": \n" +
                "-0.07799699902534485\n" +
                "7\n" +
                ": \n" +
                "-0.13697192072868347\n" +
                "8\n" +
                ": \n" +
                "0.11121651530265808\n" +
                "9\n" +
                ": \n" +
                "-0.08364605903625488\n" +
                "10\n" +
                ": \n" +
                "0.2692031264305115\n" +
                "11\n" +
                ": \n" +
                "-0.11388259381055832\n" +
                "12\n" +
                ": \n" +
                "-0.23043861985206604\n" +
                "13\n" +
                ": \n" +
                "-0.10461883246898651\n" +
                "14\n" +
                ": \n" +
                "-0.060929976403713226\n" +
                "15\n" +
                ": \n" +
                "0.2232067734003067\n" +
                "16\n" +
                ": \n" +
                "-0.17788858711719513\n" +
                "17\n" +
                ": \n" +
                "-0.14790034294128418\n" +
                "18\n" +
                ": \n" +
                "0.016883453354239464\n" +
                "19\n" +
                ": \n" +
                "0.031021445989608765\n" +
                "20\n" +
                ": \n" +
                "0.03504036366939545\n" +
                "21\n" +
                ": \n" +
                "0.014628472737967968\n" +
                "22\n" +
                ": \n" +
                "0.04545246809720993\n" +
                "23\n" +
                ": \n" +
                "0.0534946545958519\n" +
                "24\n" +
                ": \n" +
                "-0.10584504157304764\n" +
                "25\n" +
                ": \n" +
                "-0.33091291785240173\n" +
                "26\n" +
                ": \n" +
                "-0.1488906592130661\n" +
                "27\n" +
                ": \n" +
                "-0.08115963637828827\n" +
                "28\n" +
                ": \n" +
                "-0.0019086215179413557\n" +
                "29\n" +
                ": \n" +
                "-0.0718049630522728\n" +
                "30\n" +
                ": \n" +
                "-0.10140995681285858\n" +
                "31\n" +
                ": \n" +
                "0.07034731656312943\n" +
                "32\n" +
                ": \n" +
                "-0.13483254611492157\n" +
                "33\n" +
                ": \n" +
                "-0.03745625913143158\n" +
                "34\n" +
                ": \n" +
                "0.08171391487121582\n" +
                "35\n" +
                ": \n" +
                "0.09617912024259567\n" +
                "36\n" +
                ": \n" +
                "0.005639595910906792\n" +
                "37\n" +
                ": \n" +
                "-0.10559920221567154\n" +
                "38\n" +
                ": \n" +
                "0.15993590652942657\n" +
                "39\n" +
                ": \n" +
                "0.028075596317648888\n" +
                "40\n" +
                ": \n" +
                "-0.22850432991981506\n" +
                "41\n" +
                ": \n" +
                "0.004146651364862919\n" +
                "42\n" +
                ": \n" +
                "0.07249952107667923\n" +
                "43\n" +
                ": \n" +
                "0.22131820023059845\n" +
                "44\n" +
                ": \n" +
                "0.1726556420326233\n" +
                "45\n" +
                ": \n" +
                "0.061818186193704605\n" +
                "46\n" +
                ": \n" +
                "0.04857040196657181\n" +
                "47\n" +
                ": \n" +
                "-0.15475015342235565\n" +
                "48\n" +
                ": \n" +
                "0.08564542233943939\n" +
                "49\n" +
                ": \n" +
                "-0.12832461297512054\n" +
                "50\n" +
                ": \n" +
                "0.06519041955471039\n" +
                "51\n" +
                ": \n" +
                "0.12002130597829819\n" +
                "52\n" +
                ": \n" +
                "0.0837511345744133\n" +
                "53\n" +
                ": \n" +
                "0.0571102499961853\n" +
                "54\n" +
                ": \n" +
                "-0.03960120677947998\n" +
                "55\n" +
                ": \n" +
                "-0.11789701879024506\n" +
                "56\n" +
                ": \n" +
                "0.01983906514942646\n" +
                "57\n" +
                ": \n" +
                "0.13345807790756226\n" +
                "58\n" +
                ": \n" +
                "-0.1306813806295395\n" +
                "59\n" +
                ": \n" +
                "0.02703644521534443\n" +
                "60\n" +
                ": \n" +
                "0.0883038267493248\n" +
                "61\n" +
                ": \n" +
                "-0.09921538084745407\n" +
                "62\n" +
                ": \n" +
                "-0.010766292922198772\n" +
                "63\n" +
                ": \n" +
                "-0.09381558001041412\n" +
                "64\n" +
                ": \n" +
                "0.21741671860218048\n" +
                "65\n" +
                ": \n" +
                "0.09579670429229736\n" +
                "66\n" +
                ": \n" +
                "-0.11517282575368881\n" +
                "67\n" +
                ": \n" +
                "-0.22406849265098572\n" +
                "68\n" +
                ": \n" +
                "0.11171357333660126\n" +
                "69\n" +
                ": \n" +
                "-0.1606743186712265\n" +
                "70\n" +
                ": \n" +
                "-0.1638605296611786\n" +
                "71\n" +
                ": \n" +
                "0.06897573918104172\n" +
                "72\n" +
                ": \n" +
                "-0.17302079498767853\n" +
                "73\n" +
                ": \n" +
                "-0.13495387136936188\n" +
                "74\n" +
                ": \n" +
                "-0.32021087408065796\n" +
                "75\n" +
                ": \n" +
                "-0.02887032739818096\n" +
                "76\n" +
                ": \n" +
                "0.38060420751571655\n" +
                "77\n" +
                ": \n" +
                "0.057684991508722305\n" +
                "78\n" +
                ": \n" +
                "-0.2016008496284485\n" +
                "79\n" +
                ": \n" +
                "0.030484415590763092\n" +
                "80\n" +
                ": \n" +
                "0.00841997005045414\n" +
                "81\n" +
                ": \n" +
                "-0.03566005453467369\n" +
                "82\n" +
                ": \n" +
                "0.0945073664188385\n" +
                "83\n" +
                ": \n" +
                "0.21253079175949097\n" +
                "84\n" +
                ": \n" +
                "0.006136950105428696\n" +
                "85\n" +
                ": \n" +
                "0.010228821076452732\n" +
                "86\n" +
                ": \n" +
                "-0.09484369307756424\n" +
                "87\n" +
                ": \n" +
                "-0.07053165137767792\n" +
                "88\n" +
                ": \n" +
                "0.2927654981613159\n" +
                "89\n" +
                ": \n" +
                "-0.10720853507518768\n" +
                "90\n" +
                ": \n" +
                "-0.022849779576063156\n" +
                "91\n" +
                ": \n" +
                "0.18616965413093567\n" +
                "92\n" +
                ": \n" +
                "-0.053560953587293625\n" +
                "93\n" +
                ": \n" +
                "0.11223641782999039\n" +
                "94\n" +
                ": \n" +
                "0.02637975662946701\n" +
                "95\n" +
                ": \n" +
                "0.03179303929209709\n" +
                "96\n" +
                ": \n" +
                "-0.023757891729474068\n" +
                "97\n" +
                ": \n" +
                "0.05675870180130005\n" +
                "98\n" +
                ": \n" +
                "-0.06652019917964935\n" +
                "99\n" +
                ": \n" +
                "-0.019729560241103172\n"+
                "100\n" +
                ": \n" +
                "-0.013319021090865135\n" +
                "101\n" +
                ": \n" +
                "-0.053636591881513596\n" +
                "102\n" +
                ": \n" +
                "-0.05742541328072548\n" +
                "103\n" +
                ": \n" +
                "0.10790473967790604\n" +
                "104\n" +
                ": \n" +
                "-0.1784258484840393\n" +
                "105\n" +
                ": \n" +
                "0.10838323831558228\n" +
                "106\n" +
                ": \n" +
                "-0.010367576964199543\n" +
                "107\n" +
                ": \n" +
                "-0.0004802033072337508\n" +
                "108\n" +
                ": \n" +
                "0.007360962685197592\n" +
                "109\n" +
                ": \n" +
                "-0.03517422825098038\n" +
                "110\n" +
                ": \n" +
                "-0.05618368089199066\n" +
                "111\n" +
                ": \n" +
                "-0.06004226952791214\n" +
                "112\n" +
                ": \n" +
                "0.16751612722873688\n" +
                "113\n" +
                ": \n" +
                "-0.238584965467453\n" +
                "114\n" +
                ": \n" +
                "0.19246891140937805\n" +
                "115\n" +
                ": \n" +
                "0.21086294949054718\n" +
                "116\n" +
                ": \n" +
                "0.0999995693564415\n" +
                "117\n" +
                ": \n" +
                "0.09686852991580963\n" +
                "118\n" +
                ": \n" +
                "0.1079038754105568\n" +
                "119\n" +
                ": \n" +
                "0.11762654781341553\n" +
                "120\n" +
                ": \n" +
                "0.005077197682112455\n" +
                "121\n" +
                ": \n" +
                "-0.026273922994732857\n" +
                "122\n" +
                ": \n" +
                "-0.18235896527767181\n" +
                "123\n" +
                ": \n" +
                "-0.036116305738687515\n" +
                "124\n" +
                ": \n" +
                "0.09749320894479752\n" +
                "125\n" +
                ": \n" +
                "-0.06631412357091904\n" +
                "126\n" +
                ": \n" +
                "0.08055930584669113\n" +
                "127\n" +
                ": \n" +
                "-0.0032473888713866472";
    }
}
